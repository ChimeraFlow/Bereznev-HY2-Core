package tech.bereznev.hy2.sdk

/**
 * üéØ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏—ë–º–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑ HY2-—è–¥—Ä–∞.
 *
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è SDK:
 * - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è;
 * - –æ—à–∏–±–∫–∏;
 * - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
 *
 * –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ [Hy2.setEventSink].
 *
 * –ü—Ä–∏–º–µ—Ä—ã –∏–º—ë–Ω —Å–æ–±—ã—Ç–∏–π:
 * - `"started"` ‚Äî —è–¥—Ä–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ;
 * - `"stopped"` ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞;
 * - `"reloaded"` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞;
 * - `"panic"` ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (panic –≤ Go);
 * - `"error"` ‚Äî –Ω–µ—Ñ–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Ä–∞–±–æ—Ç–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞;
 * - `"reconnect"` ‚Äî –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞;
 * - `"metrics"` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤/RTT (–≤ –±—É–¥—É—â–µ–º).
 *
 * –ü–æ—Ç–æ–∫–∏:
 * - –ö–æ–ª–±—ç–∫–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑ —Ñ–æ–Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.
 *   –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å UI, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Dispatchers.Main` –∏–ª–∏ `runOnUiThread`.
 */
interface Hy2EventSink {

    /**
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–±—ã—Ç–∏–∏ —è–¥—Ä–∞.
     *
     * @param name –∏–º—è —Å–æ–±—ã—Ç–∏—è (—Å–º. —Å–ø–∏—Å–æ–∫ –≤—ã—à–µ)
     * @param dataJson JSON-–ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, —Ñ–æ—Ä–º–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ–±—ã—Ç–∏—è.
     *
     * –ü—Ä–∏–º–µ—Ä—ã:
     * ```json
     * // started
     * { "version": "0.1.0", "engine": "hy2core" }
     *
     * // error
     * { "code": 1002, "message": "invalid config" }
     * ```
     */
    fun onEvent(name: String, dataJson: String)
}

/**
 * üí¨ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–∏—ë–º–∞ –ª–æ–≥–æ–≤ –∏–∑ HY2-—è–¥—Ä–∞.
 *
 * –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ª–æ–≥–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö
 * –≤ –∫–æ–Ω—Å–æ–ª—å, UI –∏–ª–∏ —Ñ–∞–π–ª.
 *
 * –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ [Hy2.setLogSink].
 *
 * –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤:
 * - `"debug"` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è;
 * - `"info"` ‚Äî –æ–±—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏;
 * - `"warn"` ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è;
 * - `"error"` ‚Äî –æ—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è.
 *
 * –ü–æ—Ç–æ–∫–∏:
 * - –ö–æ–ª–±—ç–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞.
 *   –î–ª—è UI-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
 */
interface Hy2LogSink {

    /**
     * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω—É –∑–∞–ø–∏—Å—å –ª–æ–≥–∞.
     *
     * @param level —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`debug|info|warn|error`)
     * @param message —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
     *
     * –ü—Ä–∏–º–µ—Ä:
     * ```
     * Hy2.setLogSink(object : Hy2LogSink {
     *     override fun log(level: String, message: String) {
     *         println("[$level] $message")
     *     }
     * })
     * ```
     */
    fun log(level: String, message: String)
}
