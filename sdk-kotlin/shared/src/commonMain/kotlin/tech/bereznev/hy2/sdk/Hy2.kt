package tech.bereznev.hy2.sdk

/**
 * üß© Kotlin-first expect-—Å–ª–æ–π –¥–ª—è Bereznev HY2 SDK.
 *
 * –≠—Ç–æ multiplatform-—Ñ–∞—Å–∞–¥, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç SDK –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.
 * –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (`actual`) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
 * - Android: `Hy2Android.kt` (—á–µ—Ä–µ–∑ gomobile AAR)
 * - iOS: `Hy2Ios.kt` (—á–µ—Ä–µ–∑ XCFramework)
 *
 * –ò–¥–µ—è:
 * - –Ω–∞—Ä—É–∂—É –æ—Ç–¥–∞—ë—Ç—Å—è —É–¥–æ–±–Ω—ã–π Kotlin API;
 * - –≤–Ω—É—Ç—Ä–∏ ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ –Ω–∞—Ç–∏–≤–Ω–æ–º—É HY2-—è–¥—Ä—É (Go).
 *
 * –ü–æ—Ç–æ–∫–∏:
 * - –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã;
 * - –æ–±—Ä–∞—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ª–æ–≥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ —Ñ–æ–Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.
 */
expect object Hy2 {

    /**
     * –ó–∞–ø—É—Å–∫–∞–µ—Ç HY2-–¥–≤–∏–∂–æ–∫ —Å –∑–∞–¥–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.
     *
     * - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —è–¥—Ä–æ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (tun, outbounds, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é).
     * - –ï—Å–ª–∏ —è–¥—Ä–æ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É "already running".
     *
     * @param configJson JSON-—Å—Ç—Ä–æ–∫–∞ —Å –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π HY2
     * (–ø—Ä–∏–º–µ—Ä –≤ README: `"inbounds"`, `"outbounds"`, `"route"`).
     * @return `null`, –µ—Å–ª–∏ –≤—Å—ë —É—Å–ø–µ—à–Ω–æ, –ª–∏–±–æ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏.
     */
    fun start(configJson: String): String?

    /**
     * –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–ª–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —è–¥—Ä–∞.
     *
     * –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, —Å–µ—Ä–≤–µ—Ä—ã –∏–ª–∏ –∫–ª—é—á–∏,
     * –Ω–µ –æ–±—Ä—ã–≤–∞—è –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
     *
     * @param configJson –ù–æ–≤—ã–π JSON-–∫–æ–Ω—Ñ–∏–≥.
     * @return `null`, –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, –∏–Ω–∞—á–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
     */
    fun reload(configJson: String): String?

    /**
     * –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç HY2-–¥–≤–∏–∂–æ–∫.
     *
     * –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ ‚Äî –≤—ã–∑–æ–≤ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω.
     */
    fun stop()

    /**
     * –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —è–¥—Ä–∞.
     *
     * –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
     * - `"running"`
     * - `"stopped"`
     *
     * @return —Å—Ç—Ä–æ–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º.
     */
    fun status(): String

    /**
     * –í–µ—Ä—Å–∏—è SDK/–¥–≤–∏–∂–∫–∞.
     *
     * –ù–∞–ø—Ä–∏–º–µ—Ä: `"Bereznev-HY2-Core 0.1.0 (skeleton)"`.
     *
     * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –≤ UI.
     */
    fun version(): String

    /**
     * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON-—Å—Ç—Ä–æ–∫—É —Å–æ —Å–≤–æ–¥–∫–æ–π –∑–¥–æ—Ä–æ–≤—å—è —è–¥—Ä–∞.
     *
     * –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:
     * ```
     * {
     *   "running": true,
     *   "engine": "hy2core",
     *   "version": "0.1.0"
     * }
     * ```
     *
     * –í –±—É–¥—É—â–µ–º –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (RTT, bytesIn/out, reconnects).
     */
    fun healthJson(): String

    /**
     * –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
     *
     * –î–æ–ø—É—Å—Ç–∏–º—ã–µ —É—Ä–æ–≤–Ω–∏:
     * - `"debug"`
     * - `"info"`
     * - `"warn"`
     * - `"error"`
     *
     * –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —è–¥—Ä–∞.
     *
     * @param level —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤.
     */
    fun setLogLevel(level: String)

    /**
     * –ù–∞–∑–Ω–∞—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π —è–¥—Ä–∞.
     *
     * –°–æ–±—ã—Ç–∏—è:
     * - `"started"`, `"stopped"`, `"reloaded"`
     * - `"panic"`, `"error"`, `"warning"`
     * - `"metrics"` (–≤ –±—É–¥—É—â–µ–º)
     *
     * –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ `null` ‚Äî –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
     *
     * @param sink —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è [Hy2EventSink] –∏–ª–∏ `null`.
     */
    fun setEventSink(sink: Hy2EventSink?)

    /**
     * –ù–∞–∑–Ω–∞—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–æ–≥–æ–≤.
     *
     * –ö–æ–ª–±—ç–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤ UI –≤—Ä—É—á–Ω—É—é.
     * –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ `null` ‚Äî –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
     *
     * @param sink —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è [Hy2LogSink] –∏–ª–∏ `null`.
     */
    fun setLogSink(sink: Hy2LogSink?)
}

/* === –°–ø—Ä–∞–≤–∫–∞ ===
 *
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –æ–∂–∏–¥–∞–µ–º—ã–µ expect-–æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º:
 *
 * interface Hy2LogSink {
 *     fun log(level: String, msg: String)
 * }
 *
 * interface Hy2EventSink {
 *     fun onEvent(name: String, data: String)
 * }
 *
 * –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
 *
 * Hy2.setLogSink(object : Hy2LogSink {
 *     override fun log(level: String, msg: String) {
 *         println("[$level] $msg")
 *     }
 * })
 *
 * Hy2.start(configJson)
 */